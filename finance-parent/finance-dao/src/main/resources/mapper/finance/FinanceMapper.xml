<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sxj.finance.dao.finance.FinanceDao">
	<resultMap id="financeResultMap"
		type="com.sxj.finance.entity.FinanceEntity">
		<id property="id" column="ID" jdbcType="VARCHAR" />
		<result property="payNo" column="PAY_NO" jdbcType="VARCHAR"
			javaType="String" />
		<result property="contractNo" column="CONTRACT_NO" jdbcType="VARCHAR"
			javaType="String" />
		<result property="batchNo" column="BATCH_NO" jdbcType="VARCHAR" />
		<result property="content" column="CONTENT" jdbcType="VARCHAR" />
		<result property="payAmount" column="PAY_AMOUNT" jdbcType="INTEGER" />
		<result property="financeAmount" column="FINANCE_AMOUNT" jdbcType="INTEGER" />
		<result property="creditAmount" column="CREDIT_AMOUNT" jdbcType="INTEGER" />
		<result property="state" column="STATE" jdbcType="INTEGER"/>
	</resultMap>
	<!-- 条件查询合同 -->
	<select id="query" resultMap="financeResultMap"
		parameterType="com.sxj.util.persistent.QueryCondition">
		<![CDATA[SELECT * FROM F_FINANCE WHERE 1=1
	]]>
		<!-- 支付单号 -->
		<if test="condition.payNo != null and condition.payNo != ''">
			<![CDATA[ AND PAY_NO like CONCAT('%',#{condition.payNo},'%')]]>
		</if>
		<!-- 合同号 -->
		<if test="condition.contractNo != null and condition.contractNo != ''">
			<![CDATA[AND CONTRACT_NO like CONCAT('%',#{condition.contractNo},'%')]]>
		</if>
		<![CDATA[ ORDER BY PAY_NO DESC]]>
	</select>
</mapper>