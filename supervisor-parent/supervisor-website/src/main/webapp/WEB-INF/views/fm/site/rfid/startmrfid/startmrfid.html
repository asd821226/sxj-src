<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>私享家绿色门窗平台</title>
<meta name="keywords" content="私享家绿色门窗平台,门窗,型材厂,玻璃厂,门窗">
<meta name="description" content="私享家绿色门窗平台,为门窗行业的玻璃厂,型材厂提供产品盘点,物流跟踪,质量溯源服务。致力于推动江苏省房地产建筑行业绿色环保事业。">
<link href="${b.staticPath}style/style.css" rel="stylesheet" type="text/css" />
<script src="${b.staticPath}js/jquery.js" type="text/javascript"></script>
<Script>
$(function(){
	$("#contract_a").change(function(){
		pc_a();
	})
	$("#contract_b").change(function(){
		pc_b();
	})
	$("#pc_a").change(function(){
		rfid_a($("#contract_a option:selected").val(),$("#pc_a option:selected").val());
	})
	$("#pc_b").change(function(){
		rfid_a($("#contract_b option:selected").val(),$("#pc_b option:selected").val());
	})
})
var container=null;
function query(){
	var refContractNo=$("#refContractNo").val();
	$.post("query.htm",{refContractNo:refContractNo},function(data){
		if (data.isOk=='ok'){
			container=data.list;
			for (var i=0;i<container.length;i++){
				console.log(container[i].contract.type)
				if (container[i].contract.type=="glass"){
					$("#contract_a").append("<option value='"+i+"'>"+container[i].contract.contractNo+"</option>");
				}else if (container[i].contract.type=="extrusions"){
					$("#contract_b").append("<option value='"+i+"'>"+container[i].contract.contractNo+"</option>");
				}
			}
			pc_a();
			pc_b();
		}else{
			alert('查询失败！');
		}
	})
}

function pc_a(){
	var contractNo_id=$("#contract_a option:selected").val();
	if (contractNo_id !=null){
		if (container[contractNo_id].batchList!=null){
		for (var i=0;i<container[contractNo_id].batchList.length;i++){
			$("#pc_a").append("<option value='"+i+"'>"+container[contractNo_id].batchList[i].batch.batchNo+"</option>");
		}
		rfid_a(contractNo_id,$("#pc_a option:selected").val());
		}else{
			$("#pc_a").append("<option>该合同无补损批次</option>");
		}
	}else{
		
	}
	  
}
function pc_b(){
	var contractNo_id=$("#contract_b option:selected").val();
	if (contractNo_id !=null){
		if (container[contractNo_id].batchList!=null){
		for (var i=0;i<container[contractNo_id].batchList.length;i++){
			$("#pc_b").append("<option value='"+i+"'>"+container[contractNo_id].batchList[i].batch.batchNo+"</option>");
		}
		rfid_b(contractNo_id,$("#pc_b option:selected").val());
		}else{
			$("#pc_b").append("<option>该合同无补损批次</option>");
		}
	}else{
		
	}
}
function rfid_a(contractNo_id,pc_a_id){
	$("#rfid_a").text(container[contractNo_id].batchList[pc_a_id].batch.rfidNo);
}
function rfid_b(contractNo_id,pc_b_id){
	$("#rfid_b").text(container[contractNo_id].batchList[pc_b_id].batch.rfidNo);
}
</Script>
</head>

<body>
<@b.header />
<div class="mainBg">
<div class="fence-wide ly-clearFix">
<div class="main pb20">
<@b.leftMenu />
<div class="yard-870 rightSide ly-left">
<div class="heading mb15 ly-clearFix">
  <h1 class="ly-left">
  <span class="title fontYH f20 fb">启用认证标签</span></h1>
</div>
<div class="contBox">
<div class="item"><label>启用标签数量</label><input class="input input-w180h36"/></div>
<div class="item"><label>招标合同号</label> <input class="input input-w180h36" value="" / id="refContractNo" >&nbsp;&nbsp;<button class="button button-green" title="根据招标合同号和启用数量提取编号值最小的数量的标签区间在下方显示" onclick="query();return false;">获取标签编号区间</button></div>
<div class="item">
  <label>启用标签编号区间</label><span class="color-blue ml5" >AAAA00001-AAAA00050</span></div>
<div class="item">
  <label>对应玻璃采购合同</label><select name="" id="contract_a">
  </select></div>
<div class="item">
  <label>对应玻璃合同批次</label>  
    <select name="select2" id="pc_a">
    </select>
</div>
<div class="item">
  <label>对应玻璃RFID</label><span class="color-blue ml5" id="rfid_a"></span>
</div>
<div class="item">
  <label>对应型材采购合同</label>
  <select name="select3" id="contract_b">
  </select>
</div>
<div class="item">
  <label>对应型材合同批次</label>
  <select name="select4" id="pc_b">
  </select>
</div>
<div class="item">
  <label>对应玻璃RFID</label>
  <span class="color-blue ml5" id="rfid_b"></span> </div>
<div class="item"><label>窗型代号</label><select name="select">
            <#list type as t>
			<option value="${t.id}">${t.getName()}</option>
			</#list>
  </select></div>
<div class="item"><label>&nbsp;</label><a href="mencrfidmgr.html" class="button button-orange mr15" title="当总启用数量超过招标合同号的门窗数量时需要报错提示">确定启用</a><a href="javascript:history.go(-1)" class="button button-gray">取消</a></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<@b.footer />
</body>
</html>
